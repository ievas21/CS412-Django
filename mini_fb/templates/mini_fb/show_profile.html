{% extends 'mini_fb/base.html' %}

{% block content %}

<main>
    <div class="profile-wrapper">
        <div class="individual-profile">
            <img src="{{profile.image_url}}" alt="{{profile.image_url}}">

            <h2>{{profile.first_name}} {{profile.last_name}}</h2> <br>
            <h3>{{profile.city}}</h3> <br>
            <h4>{{profile.email}}</h4> <br>
            <a class ="nav-link-status" href="{% url 'update_profile' profile.pk %}">Update Profile</a>
        </div>

    <div class="status-message">
        <h2>Status Messages</h2> <hr><br>
        <!-- Call the Profile's get_status_messages() method -->
        {% if profile.get_status_messages %}
        {% for s in profile.get_status_messages %}
        <div class="status-item">
            <p>
                {{s.message}} - {{s.timestamp}} <br><br>
            </p>

            <div class="image-div">
            {% for img in s.get_images %}
                <img class="status-img" src='{{img.image_file.url}}' alt='{{img.image_file.url}}'>
            {% endfor %}
            </div>

        </div>
        <a href="{% url 'update_status' s.pk %}" class="nav-link-update">Update Message</a> 
        <a href="{% url 'delete_status' s.pk %}" class="nav-link-update">Delete Message</a> <br> <br>

        <hr>

        <br>
        {% endfor %}

        {% else %}
        <div>
            <h4>No Status Messages.</h4> <br>
        </div>
        {% endif %}

        <br>
        <a href="{% url 'create_status' profile.pk %}" class="nav-link-status">Create Status Message</a>

    </div>
    
    </div>
</main>

{% endblock %}